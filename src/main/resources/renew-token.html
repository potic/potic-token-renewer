<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <script src="https://cdn.auth0.com/js/auth0/8.8/auth0.min.js"></script>
        <script>
          var webAuth = new auth0.WebAuth({
            domain: '__AUTH0_DOMAIN__',
            clientID: '__AUTH0_CLIENT_ID__',
            scope: '__AUTH0_SCOPE__',
            responseType: '__AUTH0_RESPONSE__',
            redirectUri: '__CALLBACK_URL__'
          });
        </script>
        <script>
            console.log(`Parsing ${window.location.hash}`);
            try {
              webAuth.parseHash(window.location.hash, function (err, response) {
                if (err) {
                  console.log(`Could not parse hash: ${err.error}`);
                  parent.postMessage(err, "__CALLBACK_URL__");
                } else {
                  console.log(`Successfully parsed hash`);
                  console.log(response);
                  parent.postMessage(response, "__CALLBACK_URL__");
                }
              });
              console.log(`Finished successfully`);
            } catch (e) {
              console.log(`Failed: ${e}`);
            }
        </script>
    </head>
    <body></body>
</html>
